<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - XS Platform</title>
    <link rel="stylesheet" href="header-footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* USER DASHBOARD PAGE SPECIFIC STYLES */
        :root {
            --primary-blue: #2196f3;
            --accent-blue: #0d8bf2;
            --primary-text: #333;
            --secondary-text: #666;
            --light-bg: #f5f7fa;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --border-color: #e0e0e0;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 80vh;
        }

        .dashboard-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-bg);
        }

        .welcome-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }

        .welcome-message h1 {
            color: var(--primary-text);
            margin: 0 0 10px 0;
            font-size: 2rem;
        }

        .welcome-message p {
            color: var(--secondary-text);
            margin: 0;
            font-size: 1.1rem;
        }

        .welcome-message .user-name {
            color: var(--primary-blue);
            font-weight: 600;
        }

        .dashboard-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            border: none;
        }

        .quick-action-btn.primary {
            background: var(--primary-blue);
            color: white;
        }

        .quick-action-btn.primary:hover {
            background: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .quick-action-btn.secondary {
            background: white;
            color: var(--primary-text);
            border: 2px solid var(--accent-blue);
        }

        .quick-action-btn.secondary:hover {
            background: var(--light-bg);
            transform: translateY(-2px);
        }

        /* Dashboard Layout */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        @media (max-width: 992px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebar Navigation */
        .dashboard-sidebar {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .user-profile-card {
            text-align: center;
            padding-bottom: 25px;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--light-bg);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        .user-profile-card h3 {
            color: var(--primary-text);
            margin: 0 0 5px 0;
        }

        .user-profile-card p {
            color: var(--secondary-text);
            margin: 0 0 15px 0;
            font-size: 0.9rem;
        }

        .account-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .account-status.verified {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .account-status.pending {
            background: #fff3e0;
            color: #f57c00;
        }

        .account-status.unverified {
            background: #ffebee;
            color: #c62828;
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            color: var(--secondary-text);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .nav-item:hover {
            background: var(--light-bg);
            color: var(--primary-blue);
        }

        .nav-item.active {
            background: var(--primary-blue);
            color: white;
        }

        .nav-item.active i {
            color: white;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            color: var(--accent-blue);
        }

        .nav-badge {
            margin-left: auto;
            background: var(--accent-blue);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }

        /* Dashboard Content */
        .dashboard-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .dashboard-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-bg);
        }

        .section-header h2 {
            color: var(--primary-text);
            margin: 0;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header h2 i {
            color: var(--primary-blue);
        }

        .view-all-link {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-all-link:hover {
            text-decoration: underline;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-text);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* Profile Form */
        .profile-form {
            max-width: 800px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-save {
            background: var(--primary-blue);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-save:hover {
            background: var(--accent-blue);
        }

        .btn-cancel {
            background: white;
            color: var(--primary-text);
            padding: 12px 30px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-cancel:hover {
            background: var(--light-bg);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 20px;
            color: var(--primary-blue);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-text);
            margin-bottom: 5px;
            line-height: 1;
        }

        .stat-label {
            color: var(--secondary-text);
            font-size: 0.95rem;
            margin: 0;
        }

        /* Orders Table */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders-table th {
            text-align: left;
            padding: 15px;
            background: var(--light-bg);
            color: var(--primary-text);
            font-weight: 600;
            border-bottom: 2px solid #ddd;
        }

        .orders-table td {
            padding: 15px;
            border-bottom: 1px solid var(--light-bg);
            color: var(--secondary-text);
        }

        .orders-table tr:hover {
            background: #f9f9f9;
        }

        .order-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-processing {
            background: #fff3e0;
            color: #f57c00;
        }

        .status-shipped {
            background: #e3f2fd;
            color: var(--primary-blue);
        }

        .status-delivered {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-cancelled {
            background: #ffebee;
            color: #c62828;
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .order-action-btn {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .order-action-btn.track {
            background: var(--light-bg);
            color: var(--primary-blue);
        }

        .order-action-btn.track:hover {
            background: var(--primary-blue);
            color: white;
        }

        .order-action-btn.view {
            background: white;
            color: var(--primary-text);
            border: 1px solid var(--border-color);
        }

        .order-action-btn.view:hover {
            background: var(--light-bg);
        }

        /* Service Appointments */
        .appointments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .appointment-card {
            border: 2px solid var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.2s;
        }

        .appointment-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .appointment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .appointment-title {
            color: var(--primary-text);
            margin: 0 0 5px 0;
            font-size: 1.1rem;
        }

        .appointment-date {
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin: 0;
        }

        .appointment-status {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .appointment-details {
            margin: 15px 0;
        }

        .appointment-detail {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            color: var(--secondary-text);
            font-size: 0.9rem;
        }

        .appointment-detail i {
            color: var(--accent-blue);
            width: 16px;
        }

        .appointment-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .appointment-action-btn {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .appointment-action-btn.primary {
            background: var(--primary-blue);
            color: white;
        }

        .appointment-action-btn.primary:hover {
            background: var(--accent-blue);
        }

        .appointment-action-btn.secondary {
            background: white;
            color: var(--primary-text);
            border: 1px solid var(--border-color);
        }

        .appointment-action-btn.secondary:hover {
            background: var(--light-bg);
        }

        /* Wishlist Items */
        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .wishlist-item {
            border: 1px solid var(--light-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.2s;
        }

        .wishlist-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .wishlist-image {
            height: 150px;
            background: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
            font-size: 40px;
        }

        .wishlist-details {
            padding: 15px;
        }

        .wishlist-title {
            color: var(--primary-text);
            margin: 0 0 10px 0;
            font-size: 1rem;
            line-height: 1.4;
        }

        .wishlist-price {
            font-weight: 600;
            color: var(--primary-text);
            margin-bottom: 10px;
        }

        .wishlist-actions {
            display: flex;
            gap: 10px;
        }

        .wishlist-action-btn {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            border: none;
            cursor: pointer;
        }

        .wishlist-action-btn.add-to-cart {
            background: var(--primary-blue);
            color: white;
        }

        .wishlist-action-btn.add-to-cart:hover {
            background: var(--accent-blue);
        }

        .wishlist-action-btn.remove {
            background: white;
            color: var(--primary-text);
            border: 1px solid var(--border-color);
        }

        .wishlist-action-btn.remove:hover {
            background: #ffebee;
            color: #f44336;
            border-color: #f44336;
        }

        /* Recent Activity */
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-size: 16px;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            color: var(--primary-text);
            margin: 0 0 5px 0;
            line-height: 1.4;
        }

        .activity-time {
            color: var(--secondary-text);
            font-size: 0.85rem;
            margin: 0;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--secondary-text);
        }

        .empty-state i {
            font-size: 48px;
            color: var(--light-bg);
            margin-bottom: 20px;
        }

        .empty-state h3 {
            color: var(--primary-text);
            margin: 0 0 10px 0;
        }

        .empty-state p {
            margin: 0 0 20px 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Address Book */
        .address-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .address-card {
            border: 2px solid var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            position: relative;
        }

        .address-card.default {
            border-color: var(--primary-blue);
        }

        .address-type {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary-blue);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .address-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Payment Methods */
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }

        .payment-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .payment-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-size: 20px;
        }

        /* Security Settings */
        .security-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .security-info h4 {
            margin: 0 0 5px 0;
            color: var(--primary-text);
        }

        .security-info p {
            margin: 0;
            color: var(--secondary-text);
            font-size: 0.9rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-blue);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        /* Notification Settings */
        .notification-category {
            margin-bottom: 30px;
        }

        .notification-category h4 {
            color: var(--primary-text);
            margin: 0 0 15px 0;
        }

        .notification-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        /* Loading States */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--secondary-text);
        }

        /* Success/Error Messages */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .alert-error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        .alert-info {
            background: #e3f2fd;
            color: var(--primary-blue);
            border: 1px solid #bbdefb;
        }

        .alert-warning {
            background: #fff3e0;
            color: #f57c00;
            border: 1px solid #ffe0b2;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-container {
                padding: 15px;
            }
            
            .welcome-section {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .dashboard-actions {
                width: 100%;
            }
            
            .quick-action-btn {
                flex: 1;
                justify-content: center;
                min-width: 150px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .orders-table {
                display: block;
                overflow-x: auto;
            }
            
            .appointments-grid,
            .wishlist-grid,
            .address-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-section {
                padding: 20px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-card {
                text-align: left;
                display: flex;
                align-items: center;
                gap: 20px;
            }
            
            .stat-icon {
                margin: 0;
            }
            
            .order-actions,
            .appointment-actions,
            .wishlist-actions,
            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<header class="main-header">
    <!-- Header Content -->
    <div class="header-top-row">
        <div class="logo-and-nav">
            <div class="logo">XS</div>
            <div class="slogan">Electronics Shop & Repair Services</div>
            <nav class="main-nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="products.html" class="nav-link">Products</a> 
                <a href="services.html" class="nav-link">Services <span class="badge-new">NEW</span></a>
                <a href="deals.html" class="nav-link">Deals</a>
                <a href="support.html" class="nav-link">Support</a>
            </nav>
        </div>

        <div class="search-and-actions">
            <div class="search-bar-top">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search products, services, or brands..." class="search-input">
            </div>

            <div class="auth-state">
                <div class="logged-in-state" id="logged-in-state">
                    <div class="user-profile">
                        <button class="user-menu-btn" id="user-menu-btn" aria-label="Open account menu">
                            <i class="fas fa-user-circle"></i>
                        </button>
                        <div class="user-dropdown" id="user-dropdown">
                            <a href="user-dashboard.html" class="dropdown-item">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                            <a href="user-dashboard.html?tab=profile" class="dropdown-item">
                                <i class="fas fa-user"></i> My Profile
                            </a>
                            <a href="user-dashboard.html?tab=orders" class="dropdown-item">
                                <i class="fas fa-box"></i> My Orders
                            </a>
                            <a href="user-dashboard.html?tab=wishlist" class="dropdown-item">
                                <i class="fas fa-heart"></i> Wishlist
                            </a>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item logout-btn" id="logout-btn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn-wishlist" id="wishlist-btn">
                <i class="fas fa-heart"></i> 
                <span class="wishlist-count">0</span>
            </button>
            
            <button class="btn-submit" id="cart-btn">
                <i class="fas fa-shopping-cart"></i> Cart <span class="cart-count">0</span>
            </button>
            
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>
    
    <!-- Mobile Menu Panel -->
    <div class="mobile-menu-panel" id="mobile-menu-panel">
        <div class="mobile-menu-header">
            <div class="mobile-logo">XS</div>
            <button class="mobile-menu-close" id="mobile-menu-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="mobile-menu-content">
            <div class="mobile-auth-state">
                <div class="mobile-logged-in-state" id="mobile-logged-in-state">
                    <div class="mobile-user-info">
                        <div class="mobile-user-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="mobile-user-details">
                            <div class="mobile-user-name" id="mobile-user-name">Loading...</div>
                            <div class="mobile-user-email" id="mobile-user-email">Loading...</div>
                        </div>
                    </div>
                    
                    <div class="mobile-user-menu">
                        <a href="user-dashboard.html" class="mobile-nav-link">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                        <a href="user-dashboard.html?tab=profile" class="mobile-nav-link">
                            <i class="fas fa-user"></i> My Profile
                        </a>
                        <a href="user-dashboard.html?tab=orders" class="mobile-nav-link">
                            <i class="fas fa-box"></i> My Orders
                        </a>
                        <a href="user-dashboard.html?tab=wishlist" class="mobile-nav-link">
                            <i class="fas fa-heart"></i> Wishlist
                        </a>
                        <div class="mobile-menu-divider"></div>
                        <button class="mobile-action-btn" id="mobile-logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="mobile-nav-section">
                <a href="index.html" class="mobile-nav-link">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="products.html" class="mobile-nav-link">
                    <i class="fas fa-shopping-bag"></i> Products
                </a>
                <a href="services.html" class="mobile-nav-link">
                    <i class="fas fa-tools"></i> Services <span class="mobile-badge-new">NEW</span>
                </a>
                <a href="deals.html" class="mobile-nav-link">
                    <i class="fas fa-tag"></i> Deals
                </a>
                <a href="support.html" class="mobile-nav-link">
                    <i class="fas fa-headset"></i> Support
                </a>
            </div>
            
            <div class="mobile-actions-section">
                <button class="mobile-action-btn" id="mobile-wishlist-btn">
                    <i class="fas fa-heart"></i> Wishlist <span class="mobile-wishlist-count">0</span>
                </button>
                <button class="mobile-action-btn" id="mobile-cart-btn">
                    <i class="fas fa-shopping-cart"></i> Cart <span class="mobile-cart-count">0</span>
                </button>
            </div>
        </div>
    </div>
</header>

<main class="main-content">
    <div class="dashboard-container">
        <!-- Alert Area -->
        <div id="alert-area"></div>

        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="welcome-section">
                <div class="welcome-message">
                    <h1>Welcome back, <span class="user-name" id="welcome-name">Loading...</span>! ðŸ‘‹</h1>
                    <p id="dashboard-subtitle">Manage your account, orders, and preferences.</p>
                </div>
                
                <div class="dashboard-actions">
                    <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                        <i class="fas fa-shopping-bag"></i> Shop Now
                    </button>
                    <button class="quick-action-btn secondary" onclick="window.location.href='booking-form.html'">
                        <i class="fas fa-tools"></i> Book Service
                    </button>
                    <button class="quick-action-btn secondary" onclick="window.location.href='support.html'">
                        <i class="fas fa-headset"></i> Get Support
                    </button>
                </div>
            </div>
        </div>

        <!-- Dashboard Layout -->
        <div class="dashboard-layout">
            <!-- Sidebar Navigation -->
            <div class="dashboard-sidebar">
                <!-- User Profile Card -->
                <div class="user-profile-card">
                    <div class="user-avatar" id="user-avatar">
                        <span class="loading-spinner"></span>
                    </div>
                    <h3 id="profile-name">Loading...</h3>
                    <p id="profile-email">Loading...</p>
                    <span class="account-status verified" id="account-status">Loading...</span>
                </div>

                <!-- Navigation Menu -->
                <nav class="sidebar-nav">
                    <button class="nav-item active" data-tab="overview">
                        <i class="fas fa-tachometer-alt"></i>
                        Dashboard Overview
                    </button>
                    
                    <button class="nav-item" data-tab="profile">
                        <i class="fas fa-user"></i>
                        Profile Settings
                    </button>
                    
                    <button class="nav-item" data-tab="orders">
                        <i class="fas fa-shopping-bag"></i>
                        My Orders
                        <span class="nav-badge" id="orders-count">0</span>
                    </button>
                    
                    <button class="nav-item" data-tab="appointments">
                        <i class="fas fa-calendar-alt"></i>
                        Service Appointments
                        <span class="nav-badge" id="appointments-count">0</span>
                    </button>
                    
                    <button class="nav-item" data-tab="wishlist">
                        <i class="fas fa-heart"></i>
                        Wishlist
                        <span class="nav-badge" id="wishlist-count">0</span>
                    </button>
                    
                    <button class="nav-item" data-tab="addresses">
                        <i class="fas fa-map-marker-alt"></i>
                        Saved Addresses
                    </button>
                    
                    <button class="nav-item" data-tab="payment">
                        <i class="fas fa-credit-card"></i>
                        Payment Methods
                    </button>
                    
                    <button class="nav-item" data-tab="security">
                        <i class="fas fa-shield-alt"></i>
                        Security
                    </button>
                    
                    <button class="nav-item" data-tab="notifications">
                        <i class="fas fa-bell"></i>
                        Notifications
                    </button>
                    
                    <button class="nav-item" data-tab="support">
                        <i class="fas fa-headset"></i>
                        Support Tickets
                    </button>
                </nav>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Overview Tab (Default) -->
                <div class="tab-content active" id="overview-tab">
                    <!-- Loading State -->
                    <div id="overview-loading" class="dashboard-section">
                        <div class="empty-state">
                            <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                            <h3>Loading Dashboard...</h3>
                        </div>
                    </div>
                    
                    <!-- Stats Overview -->
                    <div class="dashboard-section" id="stats-section" style="display: none;">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-shopping-bag"></i>
                                </div>
                                <div class="stat-value" id="total-orders">0</div>
                                <div class="stat-label">Total Orders</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-tools"></i>
                                </div>
                                <div class="stat-value" id="total-services">0</div>
                                <div class="stat-label">Services Booked</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-wallet"></i>
                                </div>
                                <div class="stat-value" id="total-spent">$0</div>
                                <div class="stat-label">Total Spent</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="stat-value" id="member-since">0</div>
                                <div class="stat-label">Months as Member</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Orders -->
                    <div class="dashboard-section" id="recent-orders-section" style="display: none;">
                        <div class="section-header">
                            <h2><i class="fas fa-history"></i> Recent Orders</h2>
                            <a href="user-dashboard.html?tab=orders" class="view-all-link">
                                View All <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="orders-table" id="recent-orders-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Date</th>
                                        <th>Items</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-orders-body">
                                    <!-- Orders loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="no-recent-orders" class="empty-state" style="display: none;">
                            <i class="fas fa-shopping-bag"></i>
                            <h3>No Orders Yet</h3>
                            <p>You haven't placed any orders yet. Start shopping to see your orders here.</p>
                            <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                                Start Shopping
                            </button>
                        </div>
                    </div>

                    <!-- Upcoming Appointments -->
                    <div class="dashboard-section" id="appointments-section" style="display: none;">
                        <div class="section-header">
                            <h2><i class="fas fa-calendar-alt"></i> Upcoming Appointments</h2>
                            <a href="user-dashboard.html?tab=appointments" class="view-all-link">
                                View All <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                        
                        <div class="appointments-grid" id="upcoming-appointments">
                            <!-- Appointments loaded dynamically -->
                        </div>
                        
                        <div id="no-appointments" class="empty-state" style="display: none;">
                            <i class="fas fa-calendar-alt"></i>
                            <h3>No Upcoming Appointments</h3>
                            <p>You don't have any scheduled service appointments.</p>
                            <button class="quick-action-btn primary" onclick="window.location.href='booking-form.html'">
                                Book a Service
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="dashboard-section" id="activity-section" style="display: none;">
                        <div class="section-header">
                            <h2><i class="fas fa-history"></i> Recent Activity</h2>
                        </div>
                        
                        <div class="activity-list" id="recent-activity">
                            <!-- Activity loaded dynamically -->
                        </div>
                        
                        <div id="no-activity" class="empty-state" style="display: none;">
                            <i class="fas fa-history"></i>
                            <h3>No Recent Activity</h3>
                            <p>Your recent activity will appear here.</p>
                        </div>
                    </div>
                </div>

                <!-- Profile Tab -->
                <div class="tab-content" id="profile-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-user"></i> Profile Settings</h2>
                        </div>
                        
                        <div id="profile-loading">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Profile...</h3>
                            </div>
                        </div>
                        
                        <form id="profile-form" class="profile-form" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="first-name">First Name *</label>
                                    <input type="text" id="first-name" class="form-control" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="last-name">Last Name *</label>
                                    <input type="text" id="last-name" class="form-control" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="email">Email Address *</label>
                                <input type="email" id="email" class="form-control" required disabled>
                                <small style="color: var(--secondary-text);">Email cannot be changed</small>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="phone">Phone Number</label>
                                <input type="tel" id="phone" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="date-of-birth">Date of Birth</label>
                                <input type="date" id="date-of-birth" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Account Type</label>
                                <div style="display: flex; gap: 20px; margin-top: 10px;">
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="radio" name="account-type" value="personal" checked> Personal Account
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="radio" name="account-type" value="business"> Business Account
                                    </label>
                                </div>
                            </div>
                            
                            <div id="business-fields" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label" for="company-name">Company Name</label>
                                    <input type="text" id="company-name" class="form-control">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="tax-id">Tax ID / VAT Number</label>
                                    <input type="text" id="tax-id" class="form-control">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Communication Preferences</label>
                                <div style="margin-top: 10px;">
                                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                        <input type="checkbox" id="email-marketing"> Receive promotional emails
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="sms-notifications"> Receive SMS notifications
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn-save" id="save-profile">
                                    <span id="save-text">Save Changes</span>
                                    <span id="save-spinner" class="loading-spinner" style="display: none;"></span>
                                </button>
                                <button type="button" class="btn-cancel" onclick="loadProfileData()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-content" id="orders-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-shopping-bag"></i> My Orders</h2>
                            <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                                Continue Shopping
                            </button>
                        </div>
                        
                        <div id="orders-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Orders...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Appointments Tab -->
                <div class="tab-content" id="appointments-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-calendar-alt"></i> Service Appointments</h2>
                            <button class="quick-action-btn primary" onclick="window.location.href='booking-form.html'">
                                <i class="fas fa-plus"></i> Book New Service
                            </button>
                        </div>
                        
                        <div id="appointments-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Appointments...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wishlist Tab -->
                <div class="tab-content" id="wishlist-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-heart"></i> My Wishlist</h2>
                            <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                                Continue Shopping
                            </button>
                        </div>
                        
                        <div id="wishlist-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Wishlist...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Addresses Tab -->
                <div class="tab-content" id="addresses-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-map-marker-alt"></i> Saved Addresses</h2>
                            <button class="quick-action-btn primary" onclick="showAddressModal()">
                                <i class="fas fa-plus"></i> Add New Address
                            </button>
                        </div>
                        
                        <div id="addresses-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Addresses...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Methods Tab -->
                <div class="tab-content" id="payment-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-credit-card"></i> Payment Methods</h2>
                            <button class="quick-action-btn primary" onclick="showPaymentModal()">
                                <i class="fas fa-plus"></i> Add Payment Method
                            </button>
                        </div>
                        
                        <div id="payment-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Payment Methods...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Tab -->
                <div class="tab-content" id="security-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-shield-alt"></i> Security Settings</h2>
                        </div>
                        
                        <div id="security-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Security Settings...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div class="tab-content" id="notifications-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-bell"></i> Notification Preferences</h2>
                        </div>
                        
                        <div id="notifications-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Notification Settings...</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Tickets Tab -->
                <div class="tab-content" id="support-tab">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-headset"></i> Support Tickets</h2>
                            <button class="quick-action-btn primary" onclick="window.location.href='support.html'">
                                <i class="fas fa-plus"></i> New Ticket
                            </button>
                        </div>
                        
                        <div id="support-content">
                            <div class="empty-state">
                                <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                                <h3>Loading Support Tickets...</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Modals -->
<div id="address-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 style="margin: 0;">Add New Address</h3>
            <button class="modal-close" onclick="closeModal('address-modal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="address-form">
                <div class="form-group">
                    <label class="form-label" for="address-name">Address Name *</label>
                    <input type="text" id="address-name" class="form-control" placeholder="Home, Work, etc." required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="full-name">Full Name *</label>
                    <input type="text" id="full-name" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="street-address">Street Address *</label>
                    <input type="text" id="street-address" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="apartment">Apartment, Suite, etc.</label>
                    <input type="text" id="apartment" class="form-control">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="city">City *</label>
                        <input type="text" id="city" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="state">State/Province *</label>
                        <input type="text" id="state" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="zip-code">ZIP/Postal Code *</label>
                        <input type="text" id="zip-code" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="country">Country *</label>
                        <select id="country" class="form-control" required>
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="CA">Canada</option>
                            <option value="UK">United Kingdom</option>
                            <!-- Add more countries as needed -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="phone">Phone Number *</label>
                    <input type="tel" id="phone-number" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="set-default-address"> Set as default address
                    </label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-cancel" onclick="closeModal('address-modal')">Cancel</button>
            <button class="btn-save" onclick="saveAddress()">Save Address</button>
        </div>
    </div>
</div>

<div id="payment-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 style="margin: 0;">Add Payment Method</h3>
            <button class="modal-close" onclick="closeModal('payment-modal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="payment-form">
                <div class="form-group">
                    <label class="form-label">Card Type</label>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="radio" name="card-type" value="visa" checked> 
                            <i class="fab fa-cc-visa" style="font-size: 24px; color: #1a1f71;"></i> Visa
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="radio" name="card-type" value="mastercard">
                            <i class="fab fa-cc-mastercard" style="font-size: 24px; color: #eb001b;"></i> Mastercard
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="radio" name="card-type" value="amex">
                            <i class="fab fa-cc-amex" style="font-size: 24px; color: #2e77bc;"></i> Amex
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="card-name">Name on Card *</label>
                    <input type="text" id="card-name" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="card-number">Card Number *</label>
                    <input type="text" id="card-number" class="form-control" pattern="[0-9]{16}" maxlength="16" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="expiry-date">Expiry Date *</label>
                        <input type="month" id="expiry-date" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="cvv">CVV *</label>
                        <input type="text" id="cvv" class="form-control" pattern="[0-9]{3,4}" maxlength="4" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="set-default-payment"> Set as default payment method
                    </label>
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-lock"></i>
                    <span>Your payment information is securely encrypted</span>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-cancel" onclick="closeModal('payment-modal')">Cancel</button>
            <button class="btn-save" onclick="savePaymentMethod()">Add Card</button>
        </div>
    </div>
</div>

<div id="change-password-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 style="margin: 0;">Change Password</h3>
            <button class="modal-close" onclick="closeModal('change-password-modal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="change-password-form">
                <div class="form-group">
                    <label class="form-label" for="current-password">Current Password *</label>
                    <input type="password" id="current-password" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="new-password">New Password *</label>
                    <input type="password" id="new-password" class="form-control" required>
                    <small style="color: var(--secondary-text);">Minimum 8 characters with letters and numbers</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="confirm-password">Confirm New Password *</label>
                    <input type="password" id="confirm-password" class="form-control" required>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-cancel" onclick="closeModal('change-password-modal')">Cancel</button>
            <button class="btn-save" onclick="changePassword()">Change Password</button>
        </div>
    </div>
</div>

<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-section">
            <h4>XS Platform</h4>
            <p>Your trusted source for electronics and repair services since 2024.</p>
        </div>
        
        <div class="footer-section">
            <h4>Account</h4>
            <ul class="footer-links">
                <li><a href="user-dashboard.html">My Dashboard</a></li>
                <li><a href="user-dashboard.html?tab=profile">My Profile</a></li>
                <li><a href="user-dashboard.html?tab=orders">Order History</a></li>
                <li><a href="user-dashboard.html?tab=wishlist">Wishlist</a></li>
            </ul>
        </div>
    </div>
    
    <div class="copyright">
        &copy; 2024 XS Platform. All rights reserved.
    </div>
</footer>

<!-- Backend API Configuration -->
<script>
    // API Configuration
    const API_BASE_URL = 'http://localhost:3000/api'; // Change to your backend URL
    const AUTH_TOKEN = localStorage.getItem('auth_token');
    
    // Check authentication
    if (!AUTH_TOKEN) {
        window.location.href = 'login.html';
    }
</script>

<!-- Dashboard-specific JavaScript -->
<script>
    // Dashboard Application
    class DashboardApp {
        constructor() {
            this.currentTab = 'overview';
            this.userData = null;
            this.init();
        }
        
        init() {
            this.setupEventListeners();
            this.checkAuthentication();
            this.loadInitialData();
            
            // Check URL for tab parameter
            const urlParams = new URLSearchParams(window.location.search);
            const tabParam = urlParams.get('tab');
            if (tabParam && document.querySelector(`[data-tab="${tabParam}"]`)) {
                this.switchTab(tabParam);
            }
        }
        
        setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tabId = item.dataset.tab;
                    this.switchTab(tabId);
                });
            });
            
            // Profile form
            document.getElementById('profile-form')?.addEventListener('submit', (e) => {
                e.preventDefault();
                this.saveProfile();
            });
            
            // Account type toggle
            document.querySelectorAll('input[name="account-type"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('business-fields').style.display = 
                        radio.value === 'business' ? 'block' : 'none';
                });
            });
            
            // Logout buttons
            document.getElementById('logout-btn')?.addEventListener('click', () => this.logout());
            document.getElementById('mobile-logout-btn')?.addEventListener('click', () => this.logout());
            
            // Cart and wishlist buttons
            document.getElementById('cart-btn')?.addEventListener('click', () => {
                window.location.href = 'cart.html';
            });
            
            document.getElementById('wishlist-btn')?.addEventListener('click', () => {
                this.switchTab('wishlist');
            });
        }
        
        async checkAuthentication() {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/verify`, {
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Not authenticated');
                }
                
                const data = await response.json();
                this.userData = data.user;
                this.updateUserUI();
            } catch (error) {
                console.error('Authentication error:', error);
                window.location.href = 'login.html';
            }
        }
        
        updateUserUI() {
            if (!this.userData) return;
            
            // Update header elements
            const firstName = this.userData.name.split(' ')[0];
            document.getElementById('welcome-name').textContent = firstName;
            document.getElementById('profile-name').textContent = this.userData.name;
            document.getElementById('profile-email').textContent = this.userData.email;
            document.getElementById('mobile-user-name').textContent = this.userData.name;
            document.getElementById('mobile-user-email').textContent = this.userData.email;
            
            // Update avatar with initials
            const initials = this.getInitials(this.userData.name);
            document.getElementById('user-avatar').innerHTML = `<span>${initials}</span>`;
            
            // Update account status
            const statusEl = document.getElementById('account-status');
            statusEl.textContent = this.userData.verified ? 'Verified Account' : 'Unverified Account';
            statusEl.className = `account-status ${this.userData.verified ? 'verified' : 'unverified'}`;
            
            // Update subtitle for business accounts
            if (this.userData.accountType === 'business') {
                document.getElementById('dashboard-subtitle').textContent = 
                    'Manage your business account, bulk orders, and team settings.';
            }
        }
        
        getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
        }
        
        switchTab(tabId) {
            // Update URL without reload
            const url = new URL(window.location);
            url.searchParams.set('tab', tabId);
            window.history.pushState({}, '', url);
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabId) {
                    item.classList.add('active');
                }
            });
            
            // Show active tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === `${tabId}-tab`) {
                    content.classList.add('active');
                    this.loadTabContent(tabId);
                }
            });
            
            this.currentTab = tabId;
        }
        
        async loadInitialData() {
            try {
                await Promise.all([
                    this.loadOverviewData(),
                    this.updateCounts()
                ]);
            } catch (error) {
                this.showAlert('Failed to load dashboard data', 'error');
                console.error('Error loading initial data:', error);
            }
        }
        
        async loadTabContent(tabId) {
            try {
                switch(tabId) {
                    case 'overview':
                        await this.loadOverviewData();
                        break;
                    case 'profile':
                        await this.loadProfileData();
                        break;
                    case 'orders':
                        await this.loadOrders();
                        break;
                    case 'appointments':
                        await this.loadAppointments();
                        break;
                    case 'wishlist':
                        await this.loadWishlist();
                        break;
                    case 'addresses':
                        await this.loadAddresses();
                        break;
                    case 'payment':
                        await this.loadPaymentMethods();
                        break;
                    case 'security':
                        await this.loadSecuritySettings();
                        break;
                    case 'notifications':
                        await this.loadNotificationSettings();
                        break;
                    case 'support':
                        await this.loadSupportTickets();
                        break;
                }
            } catch (error) {
                this.showAlert(`Failed to load ${tabId} data`, 'error');
                console.error(`Error loading ${tabId}:`, error);
            }
        }
        
        async loadOverviewData() {
            try {
                // Show loading state
                document.getElementById('overview-loading').style.display = 'block';
                
                const [stats, recentOrders, appointments, activity] = await Promise.all([
                    this.fetchDashboardStats(),
                    this.fetchRecentOrders(5),
                    this.fetchUpcomingAppointments(),
                    this.fetchRecentActivity()
                ]);
                
                // Update stats
                document.getElementById('total-orders').textContent = stats.totalOrders;
                document.getElementById('total-services').textContent = stats.totalServices;
                document.getElementById('total-spent').textContent = `$${stats.totalSpent.toFixed(2)}`;
                document.getElementById('member-since').textContent = stats.memberMonths;
                
                // Hide loading, show content
                document.getElementById('overview-loading').style.display = 'none';
                document.getElementById('stats-section').style.display = 'block';
                
                // Update recent orders
                this.renderRecentOrders(recentOrders);
                document.getElementById('recent-orders-section').style.display = 'block';
                
                // Update appointments
                this.renderAppointments(appointments);
                document.getElementById('appointments-section').style.display = 'block';
                
                // Update activity
                this.renderActivity(activity);
                document.getElementById('activity-section').style.display = 'block';
            } catch (error) {
                document.getElementById('overview-loading').style.display = 'none';
                throw error;
            }
        }
        
        async loadProfileData() {
            try {
                document.getElementById('profile-loading').style.display = 'block';
                document.getElementById('profile-form').style.display = 'none';
                
                const profile = await this.fetchUserProfile();
                
                // Populate form
                const nameParts = profile.name.split(' ');
                document.getElementById('first-name').value = nameParts[0] || '';
                document.getElementById('last-name').value = nameParts.slice(1).join(' ') || '';
                document.getElementById('email').value = profile.email;
                document.getElementById('phone').value = profile.phone || '';
                document.getElementById('date-of-birth').value = profile.dateOfBirth || '';
                
                // Account type
                document.querySelector(`input[name="account-type"][value="${profile.accountType || 'personal'}"]`).checked = true;
                document.getElementById('business-fields').style.display = 
                    profile.accountType === 'business' ? 'block' : 'none';
                
                // Business fields
                document.getElementById('company-name').value = profile.companyName || '';
                document.getElementById('tax-id').value = profile.taxId || '';
                
                // Preferences
                document.getElementById('email-marketing').checked = profile.preferences?.emailMarketing || false;
                document.getElementById('sms-notifications').checked = profile.preferences?.smsNotifications || false;
                
                document.getElementById('profile-loading').style.display = 'none';
                document.getElementById('profile-form').style.display = 'block';
            } catch (error) {
                document.getElementById('profile-loading').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load profile data</span>
                    </div>
                `;
                throw error;
            }
        }
        
        async saveProfile() {
            const saveBtn = document.getElementById('save-profile');
            const saveText = document.getElementById('save-text');
            const saveSpinner = document.getElementById('save-spinner');
            
            // Show loading state
            saveBtn.disabled = true;
            saveText.style.display = 'none';
            saveSpinner.style.display = 'inline-block';
            
            try {
                const formData = {
                    name: `${document.getElementById('first-name').value.trim()} ${document.getElementById('last-name').value.trim()}`.trim(),
                    phone: document.getElementById('phone').value.trim(),
                    dateOfBirth: document.getElementById('date-of-birth').value,
                    accountType: document.querySelector('input[name="account-type"]:checked').value,
                    companyName: document.getElementById('company-name').value.trim(),
                    taxId: document.getElementById('tax-id').value.trim(),
                    preferences: {
                        emailMarketing: document.getElementById('email-marketing').checked,
                        smsNotifications: document.getElementById('sms-notifications').checked
                    }
                };
                
                const response = await fetch(`${API_BASE_URL}/user/profile`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify(formData)
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to update profile');
                }
                
                const data = await response.json();
                this.userData = data.user;
                this.updateUserUI();
                this.showAlert('Profile updated successfully!', 'success');
            } catch (error) {
                this.showAlert(error.message || 'Failed to update profile', 'error');
            } finally {
                saveBtn.disabled = false;
                saveText.style.display = 'inline';
                saveSpinner.style.display = 'none';
            }
        }
        
        async loadOrders() {
            try {
                const orders = await this.fetchUserOrders();
                this.renderOrders(orders);
            } catch (error) {
                document.getElementById('orders-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load orders</span>
                    </div>
                `;
            }
        }
        
        async loadAppointments() {
            try {
                const appointments = await this.fetchUserAppointments();
                this.renderAppointmentsTab(appointments);
            } catch (error) {
                document.getElementById('appointments-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load appointments</span>
                    </div>
                `;
            }
        }
        
        async loadWishlist() {
            try {
                const wishlist = await this.fetchUserWishlist();
                this.renderWishlist(wishlist);
            } catch (error) {
                document.getElementById('wishlist-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load wishlist</span>
                    </div>
                `;
            }
        }
        
        async loadAddresses() {
            try {
                const addresses = await this.fetchUserAddresses();
                this.renderAddresses(addresses);
            } catch (error) {
                document.getElementById('addresses-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load addresses</span>
                    </div>
                `;
            }
        }
        
        async loadPaymentMethods() {
            try {
                const paymentMethods = await this.fetchPaymentMethods();
                this.renderPaymentMethods(paymentMethods);
            } catch (error) {
                document.getElementById('payment-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load payment methods</span>
                    </div>
                `;
            }
        }
        
        async loadSecuritySettings() {
            try {
                const securityData = await this.fetchSecuritySettings();
                this.renderSecuritySettings(securityData);
            } catch (error) {
                document.getElementById('security-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load security settings</span>
                    </div>
                `;
            }
        }
        
        async loadNotificationSettings() {
            try {
                const notifications = await this.fetchNotificationSettings();
                this.renderNotificationSettings(notifications);
            } catch (error) {
                document.getElementById('notifications-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load notification settings</span>
                    </div>
                `;
            }
        }
        
        async loadSupportTickets() {
            try {
                const tickets = await this.fetchSupportTickets();
                this.renderSupportTickets(tickets);
            } catch (error) {
                document.getElementById('support-content').innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Failed to load support tickets</span>
                    </div>
                `;
            }
        }
        
        async updateCounts() {
            try {
                const counts = await this.fetchDashboardCounts();
                
                document.getElementById('orders-count').textContent = counts.orders;
                document.getElementById('appointments-count').textContent = counts.appointments;
                document.getElementById('wishlist-count').textContent = counts.wishlist;
                
                // Update header counts
                document.querySelectorAll('.wishlist-count, .mobile-wishlist-count').forEach(el => {
                    el.textContent = counts.wishlist;
                });
                
                document.querySelectorAll('.cart-count, .mobile-cart-count').forEach(el => {
                    el.textContent = counts.cart;
                });
            } catch (error) {
                console.error('Error updating counts:', error);
            }
        }
        
        // API Methods
        async fetchDashboardStats() {
            const response = await fetch(`${API_BASE_URL}/dashboard/stats`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch dashboard stats');
            }
            
            return await response.json();
        }
        
        async fetchRecentOrders(limit = 5) {
            const response = await fetch(`${API_BASE_URL}/orders/recent?limit=${limit}`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch recent orders');
            }
            
            return await response.json();
        }
        
        async fetchUpcomingAppointments() {
            const response = await fetch(`${API_BASE_URL}/appointments/upcoming`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch appointments');
            }
            
            return await response.json();
        }
        
        async fetchRecentActivity() {
            const response = await fetch(`${API_BASE_URL}/activity/recent`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch activity');
            }
            
            return await response.json();
        }
        
        async fetchUserProfile() {
            const response = await fetch(`${API_BASE_URL}/user/profile`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch profile');
            }
            
            return await response.json();
        }
        
        async fetchUserOrders() {
            const response = await fetch(`${API_BASE_URL}/orders`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch orders');
            }
            
            return await response.json();
        }
        
        async fetchUserAppointments() {
            const response = await fetch(`${API_BASE_URL}/appointments`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch appointments');
            }
            
            return await response.json();
        }
        
        async fetchUserWishlist() {
            const response = await fetch(`${API_BASE_URL}/wishlist`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch wishlist');
            }
            
            return await response.json();
        }
        
        async fetchUserAddresses() {
            const response = await fetch(`${API_BASE_URL}/user/addresses`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch addresses');
            }
            
            return await response.json();
        }
        
        async fetchPaymentMethods() {
            const response = await fetch(`${API_BASE_URL}/user/payment-methods`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch payment methods');
            }
            
            return await response.json();
        }
        
        async fetchSecuritySettings() {
            const response = await fetch(`${API_BASE_URL}/user/security`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch security settings');
            }
            
            return await response.json();
        }
        
        async fetchNotificationSettings() {
            const response = await fetch(`${API_BASE_URL}/user/notifications`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch notification settings');
            }
            
            return await response.json();
        }
        
        async fetchSupportTickets() {
            const response = await fetch(`${API_BASE_URL}/support/tickets`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch support tickets');
            }
            
            return await response.json();
        }
        
        async fetchDashboardCounts() {
            const response = await fetch(`${API_BASE_URL}/dashboard/counts`, {
                headers: {
                    'Authorization': `Bearer ${AUTH_TOKEN}`
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to fetch counts');
            }
            
            return await response.json();
        }
        
        // Rendering Methods
        renderRecentOrders(orders) {
            const tbody = document.getElementById('recent-orders-body');
            const noOrders = document.getElementById('no-recent-orders');
            
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (orders.length === 0) {
                noOrders.style.display = 'block';
                return;
            }
            
            noOrders.style.display = 'none';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.orderNumber}</td>
                    <td>${this.formatDate(order.createdAt)}</td>
                    <td>${order.items.map(item => item.name).join(', ')}</td>
                    <td>$${order.total.toFixed(2)}</td>
                    <td><span class="order-status status-${order.status}">${order.status}</span></td>
                    <td>
                        <div class="order-actions">
                            <button class="order-action-btn view" onclick="dashboard.viewOrder('${order._id}')">View</button>
                            ${order.status === 'shipped' ? `<button class="order-action-btn track" onclick="dashboard.trackOrder('${order._id}')">Track</button>` : ''}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        renderOrders(orders) {
            const container = document.getElementById('orders-content');
            
            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-bag"></i>
                        <h3>No Orders Yet</h3>
                        <p>You haven't placed any orders yet. Start shopping to see your orders here.</p>
                        <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                            Start Shopping
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = `
                <div class="table-responsive">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            orders.forEach(order => {
                html += `
                    <tr>
                        <td>${order.orderNumber}</td>
                        <td>${this.formatDate(order.createdAt)}</td>
                        <td>${order.items.map(item => item.name).join(', ')}</td>
                        <td>$${order.total.toFixed(2)}</td>
                        <td><span class="order-status status-${order.status}">${order.status}</span></td>
                        <td>
                            <div class="order-actions">
                                <button class="order-action-btn view" onclick="dashboard.viewOrder('${order._id}')">View</button>
                                ${order.status === 'shipped' ? `<button class="order-action-btn track" onclick="dashboard.trackOrder('${order._id}')">Track</button>` : ''}
                                ${order.status === 'delivered' ? `<button class="order-action-btn view" onclick="dashboard.reorder('${order._id}')">Reorder</button>` : ''}
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        renderAppointments(appointments) {
            const container = document.getElementById('upcoming-appointments');
            const noAppointments = document.getElementById('no-appointments');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            if (appointments.length === 0) {
                noAppointments.style.display = 'block';
                return;
            }
            
            noAppointments.style.display = 'none';
            
            appointments.forEach(appointment => {
                const card = document.createElement('div');
                card.className = `appointment-card`;
                card.innerHTML = `
                    <div class="appointment-header">
                        <div>
                            <h3 class="appointment-title">${appointment.service}</h3>
                            <p class="appointment-date">${this.formatDateTime(appointment.scheduledDate)}</p>
                        </div>
                        <span class="appointment-status status-${appointment.status}">${appointment.status}</span>
                    </div>
                    
                    <div class="appointment-details">
                        <div class="appointment-detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${appointment.location}</span>
                        </div>
                        <div class="appointment-detail">
                            <i class="fas fa-tools"></i>
                            <span>${appointment.device}</span>
                        </div>
                        ${appointment.technician ? `
                        <div class="appointment-detail">
                            <i class="fas fa-user"></i>
                            <span>Assigned to: ${appointment.technician}</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="appointment-actions">
                        <button class="appointment-action-btn primary" onclick="dashboard.rescheduleAppointment('${appointment._id}')">Reschedule</button>
                        <button class="appointment-action-btn secondary" onclick="dashboard.cancelAppointment('${appointment._id}')">Cancel</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        renderAppointmentsTab(appointments) {
            const container = document.getElementById('appointments-content');
            
            if (appointments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>No Appointments</h3>
                        <p>You haven't booked any service appointments yet.</p>
                        <button class="quick-action-btn primary" onclick="window.location.href='booking-form.html'">
                            Book a Service
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="appointments-grid">';
            
            appointments.forEach(appointment => {
                html += `
                    <div class="appointment-card">
                        <div class="appointment-header">
                            <div>
                                <h3 class="appointment-title">${appointment.service}</h3>
                                <p class="appointment-date">${this.formatDateTime(appointment.scheduledDate)}</p>
                            </div>
                            <span class="appointment-status status-${appointment.status}">${appointment.status}</span>
                        </div>
                        
                        <div class="appointment-details">
                            <div class="appointment-detail">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${appointment.location}</span>
                            </div>
                            <div class="appointment-detail">
                                <i class="fas fa-tools"></i>
                                <span>${appointment.device}</span>
                            </div>
                            ${appointment.technician ? `
                            <div class="appointment-detail">
                                <i class="fas fa-user"></i>
                                <span>Assigned to: ${appointment.technician}</span>
                            </div>
                            ` : ''}
                            ${appointment.notes ? `
                            <div class="appointment-detail">
                                <i class="fas fa-sticky-note"></i>
                                <span>${appointment.notes}</span>
                            </div>
                            ` : ''}
                        </div>
                        
                        <div class="appointment-actions">
                            ${appointment.status === 'scheduled' ? `
                            <button class="appointment-action-btn primary" onclick="dashboard.rescheduleAppointment('${appointment._id}')">Reschedule</button>
                            <button class="appointment-action-btn secondary" onclick="dashboard.cancelAppointment('${appointment._id}')">Cancel</button>
                            ` : ''}
                            <button class="appointment-action-btn view" onclick="dashboard.viewAppointment('${appointment._id}')">Details</button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        renderActivity(activities) {
            const container = document.getElementById('recent-activity');
            const noActivity = document.getElementById('no-activity');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            if (activities.length === 0) {
                noActivity.style.display = 'block';
                return;
            }
            
            noActivity.style.display = 'none';
            
            activities.forEach(activity => {
                const item = document.createElement('div');
                item.className = 'activity-item';
                item.innerHTML = `
                    <div class="activity-icon">
                        <i class="fas fa-${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <p class="activity-text">${activity.description}</p>
                        <p class="activity-time">${this.formatTimeAgo(activity.createdAt)}</p>
                    </div>
                `;
                container.appendChild(item);
            });
        }
        
        renderWishlist(wishlist) {
            const container = document.getElementById('wishlist-content');
            
            if (wishlist.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <h3>Your Wishlist is Empty</h3>
                        <p>Add products you like to your wishlist to save them for later.</p>
                        <button class="quick-action-btn primary" onclick="window.location.href='products.html'">
                            Browse Products
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="wishlist-grid">';
            
            wishlist.forEach(item => {
                html += `
                    <div class="wishlist-item" data-id="${item.product._id}">
                        <div class="wishlist-image">
                            <img src="${item.product.image || '/api/placeholder/200/150'}" alt="${item.product.name}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div class="wishlist-details">
                            <h3 class="wishlist-title">${item.product.name}</h3>
                            <div class="wishlist-price">$${item.product.price.toFixed(2)}</div>
                            <div class="wishlist-actions">
                                <button class="wishlist-action-btn add-to-cart" onclick="dashboard.addToCartFromWishlist('${item.product._id}')">Add to Cart</button>
                                <button class="wishlist-action-btn remove" onclick="dashboard.removeFromWishlist('${item._id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        renderAddresses(addresses) {
            const container = document.getElementById('addresses-content');
            
            if (addresses.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>No Saved Addresses</h3>
                        <p>Add addresses for faster checkout.</p>
                        <button class="quick-action-btn primary" onclick="dashboard.showAddressModal()">
                            Add Address
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="address-grid">';
            
            addresses.forEach(address => {
                html += `
                    <div class="address-card ${address.isDefault ? 'default' : ''}">
                        ${address.isDefault ? '<span class="address-type">Default</span>' : ''}
                        <h3>${address.name}</h3>
                        <p>${address.street}</p>
                        ${address.apartment ? `<p>${address.apartment}</p>` : ''}
                        <p>${address.city}, ${address.state} ${address.zipCode}</p>
                        <p>${address.country}</p>
                        <p><strong>Phone:</strong> ${address.phone}</p>
                        
                        <div class="address-actions">
                            ${!address.isDefault ? `
                            <button class="order-action-btn" onclick="dashboard.setDefaultAddress('${address._id}')">Set as Default</button>
                            ` : ''}
                            <button class="order-action-btn view" onclick="dashboard.editAddress('${address._id}')">Edit</button>
                            <button class="order-action-btn secondary" onclick="dashboard.deleteAddress('${address._id}')">Delete</button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        renderPaymentMethods(payments) {
            const container = document.getElementById('payment-content');
            
            if (payments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-credit-card"></i>
                        <h3>No Payment Methods</h3>
                        <p>Add payment methods for faster checkout.</p>
                        <button class="quick-action-btn primary" onclick="dashboard.showPaymentModal()">
                            Add Payment Method
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="payment-methods">';
            
            payments.forEach(payment => {
                const cardIcon = payment.cardType === 'visa' ? 'cc-visa' : 
                                payment.cardType === 'mastercard' ? 'cc-mastercard' : 
                                payment.cardType === 'amex' ? 'cc-amex' : 'credit-card';
                
                html += `
                    <div class="payment-method">
                        <div class="payment-info">
                            <div class="payment-icon">
                                <i class="fab fa-${cardIcon}"></i>
                            </div>
                            <div>
                                <h4>${payment.cardType.charAt(0).toUpperCase() + payment.cardType.slice(1)} â€¢â€¢â€¢â€¢ ${payment.last4}</h4>
                                <p>Expires ${payment.expiryMonth}/${payment.expiryYear}</p>
                                ${payment.isDefault ? '<span style="color: var(--primary-blue); font-size: 0.8rem;">Default</span>' : ''}
                            </div>
                        </div>
                        <div>
                            ${!payment.isDefault ? `
                            <button class="order-action-btn" onclick="dashboard.setDefaultPayment('${payment._id}')">Set as Default</button>
                            ` : ''}
                            <button class="order-action-btn secondary" onclick="dashboard.deletePayment('${payment._id}')">Remove</button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        renderSecuritySettings(securityData) {
            const container = document.getElementById('security-content');
            
            container.innerHTML = `
                <div class="security-item">
                    <div class="security-info">
                        <h4>Two-Factor Authentication</h4>
                        <p>Add an extra layer of security to your account</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="2fa-toggle" ${securityData.twoFactorEnabled ? 'checked' : ''} onchange="dashboard.toggle2FA(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="security-item">
                    <div class="security-info">
                        <h4>Change Password</h4>
                        <p>Update your password regularly for better security</p>
                    </div>
                    <button class="quick-action-btn secondary" onclick="dashboard.showChangePasswordModal()">Change Password</button>
                </div>
                
                <div class="security-item">
                    <div class="security-info">
                        <h4>Active Sessions</h4>
                        <p>Manage your logged-in devices and sessions</p>
                    </div>
                    <button class="quick-action-btn secondary" onclick="dashboard.viewActiveSessions()">View Sessions</button>
                </div>
                
                <div class="security-item">
                    <div class="security-info">
                        <h4>Account Activity</h4>
                        <p>Review recent account activity and security events</p>
                    </div>
                    <button class="quick-action-btn secondary" onclick="dashboard.viewAccountActivity()">View Activity</button>
                </div>
            `;
        }
        
        renderNotificationSettings(notifications) {
            const container = document.getElementById('notifications-content');
            
            container.innerHTML = `
                <div class="notification-category">
                    <h4>Email Notifications</h4>
                    ${this.renderNotificationCategory(notifications.email)}
                </div>
                
                <div class="notification-category">
                    <h4>Push Notifications</h4>
                    ${this.renderNotificationCategory(notifications.push)}
                </div>
                
                <div class="notification-category">
                    <h4>SMS Notifications</h4>
                    ${this.renderNotificationCategory(notifications.sms)}
                </div>
            `;
        }
        
        renderNotificationCategory(category) {
            let html = '';
            for (const [key, value] of Object.entries(category)) {
                const label = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                html += `
                    <div class="notification-item">
                        <span>${label}</span>
                        <label class="toggle-switch">
                            <input type="checkbox" ${value ? 'checked' : ''} onchange="dashboard.updateNotification('${key}', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                `;
            }
            return html;
        }
        
        renderSupportTickets(tickets) {
            const container = document.getElementById('support-content');
            
            if (tickets.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-headset"></i>
                        <h3>No Support Tickets</h3>
                        <p>You haven't created any support tickets yet.</p>
                        <button class="quick-action-btn primary" onclick="window.location.href='support.html'">
                            Contact Support
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="tickets-list">';
            
            tickets.forEach(ticket => {
                const icon = ticket.type === 'technical' ? 'tools' : 
                            ticket.type === 'billing' ? 'credit-card' : 
                            ticket.type === 'shipping' ? 'shipping-fast' : 'question-circle';
                
                html += `
                    <div class="ticket-item">
                        <div class="ticket-icon">
                            <i class="fas fa-${icon}"></i>
                        </div>
                        <div class="ticket-content">
                            <h3 class="ticket-title">${ticket.subject}</h3>
                            <div class="ticket-meta">
                                <span>Created: ${this.formatDate(ticket.createdAt)}</span>
                                <span>Ticket ID: ${ticket.ticketNumber}</span>
                                ${ticket.updatedAt ? `<span>Updated: ${this.formatDate(ticket.updatedAt)}</span>` : ''}
                            </div>
                        </div>
                        <span class="ticket-status status-${ticket.status}">${ticket.status}</span>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        // Action Methods
        viewOrder(orderId) {
            window.location.href = `order-details.html?id=${orderId}`;
        }
        
        trackOrder(orderId) {
            window.location.href = `order-tracking.html?id=${orderId}`;
        }
        
        reorder(orderId) {
            this.showAlert('Adding items from order to cart...', 'info');
            // Implement reorder logic
        }
        
        rescheduleAppointment(appointmentId) {
            window.location.href = `booking-form.html?reschedule=${appointmentId}`;
        }
        
        async cancelAppointment(appointmentId) {
            if (!confirm('Are you sure you want to cancel this appointment?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/appointments/${appointmentId}/cancel`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to cancel appointment');
                }
                
                this.showAlert('Appointment cancelled successfully', 'success');
                this.loadTabContent(this.currentTab);
                this.updateCounts();
            } catch (error) {
                this.showAlert(error.message || 'Failed to cancel appointment', 'error');
            }
        }
        
        viewAppointment(appointmentId) {
            window.location.href = `appointment-details.html?id=${appointmentId}`;
        }
        
        async addToCartFromWishlist(productId) {
            try {
                const response = await fetch(`${API_BASE_URL}/cart/add`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify({ productId, quantity: 1 })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to add to cart');
                }
                
                this.showAlert('Product added to cart!', 'success');
                this.updateCounts();
            } catch (error) {
                this.showAlert(error.message || 'Failed to add to cart', 'error');
            }
        }
        
        async removeFromWishlist(wishlistItemId) {
            if (!confirm('Remove this item from your wishlist?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/wishlist/${wishlistItemId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to remove from wishlist');
                }
                
                this.showAlert('Item removed from wishlist', 'success');
                this.loadTabContent('wishlist');
                this.updateCounts();
            } catch (error) {
                this.showAlert(error.message || 'Failed to remove from wishlist', 'error');
            }
        }
        
        showAddressModal() {
            document.getElementById('address-modal').classList.add('active');
        }
        
        async saveAddress() {
            const form = document.getElementById('address-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const addressData = {
                name: document.getElementById('address-name').value,
                fullName: document.getElementById('full-name').value,
                street: document.getElementById('street-address').value,
                apartment: document.getElementById('apartment').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                zipCode: document.getElementById('zip-code').value,
                country: document.getElementById('country').value,
                phone: document.getElementById('phone-number').value,
                isDefault: document.getElementById('set-default-address').checked
            };
            
            try {
                const response = await fetch(`${API_BASE_URL}/user/addresses`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify(addressData)
                });
                
                if (!response.ok) {
                    throw new Error('Failed to save address');
                }
                
                this.showAlert('Address saved successfully', 'success');
                this.closeModal('address-modal');
                this.loadTabContent('addresses');
            } catch (error) {
                this.showAlert(error.message || 'Failed to save address', 'error');
            }
        }
        
        async setDefaultAddress(addressId) {
            try {
                const response = await fetch(`${API_BASE_URL}/user/addresses/${addressId}/default`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to set default address');
                }
                
                this.showAlert('Default address updated', 'success');
                this.loadTabContent('addresses');
            } catch (error) {
                this.showAlert(error.message || 'Failed to update address', 'error');
            }
        }
        
        async deleteAddress(addressId) {
            if (!confirm('Delete this address?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/user/addresses/${addressId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to delete address');
                }
                
                this.showAlert('Address deleted', 'success');
                this.loadTabContent('addresses');
            } catch (error) {
                this.showAlert(error.message || 'Failed to delete address', 'error');
            }
        }
        
        showPaymentModal() {
            document.getElementById('payment-modal').classList.add('active');
        }
        
        async savePaymentMethod() {
            const form = document.getElementById('payment-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const cardData = {
                cardType: document.querySelector('input[name="card-type"]:checked').value,
                nameOnCard: document.getElementById('card-name').value,
                cardNumber: document.getElementById('card-number').value,
                expiryDate: document.getElementById('expiry-date').value,
                cvv: document.getElementById('cvv').value,
                isDefault: document.getElementById('set-default-payment').checked
            };
            
            try {
                const response = await fetch(`${API_BASE_URL}/user/payment-methods`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify(cardData)
                });
                
                if (!response.ok) {
                    throw new Error('Failed to save payment method');
                }
                
                this.showAlert('Payment method saved successfully', 'success');
                this.closeModal('payment-modal');
                this.loadTabContent('payment');
            } catch (error) {
                this.showAlert(error.message || 'Failed to save payment method', 'error');
            }
        }
        
        async setDefaultPayment(paymentId) {
            try {
                const response = await fetch(`${API_BASE_URL}/user/payment-methods/${paymentId}/default`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to set default payment method');
                }
                
                this.showAlert('Default payment method updated', 'success');
                this.loadTabContent('payment');
            } catch (error) {
                this.showAlert(error.message || 'Failed to update payment method', 'error');
            }
        }
        
        async deletePayment(paymentId) {
            if (!confirm('Remove this payment method?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/user/payment-methods/${paymentId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to remove payment method');
                }
                
                this.showAlert('Payment method removed', 'success');
                this.loadTabContent('payment');
            } catch (error) {
                this.showAlert(error.message || 'Failed to remove payment method', 'error');
            }
        }
        
        async toggle2FA(enabled) {
            try {
                const response = await fetch(`${API_BASE_URL}/user/two-factor`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify({ enabled })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to update 2FA settings');
                }
                
                this.showAlert(`Two-factor authentication ${enabled ? 'enabled' : 'disabled'}`, 'success');
            } catch (error) {
                this.showAlert(error.message || 'Failed to update 2FA settings', 'error');
            }
        }
        
        showChangePasswordModal() {
            document.getElementById('change-password-modal').classList.add('active');
        }
        
        async changePassword() {
            const form = document.getElementById('change-password-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const passwordData = {
                currentPassword: document.getElementById('current-password').value,
                newPassword: document.getElementById('new-password').value,
                confirmPassword: document.getElementById('confirm-password').value
            };
            
            if (passwordData.newPassword !== passwordData.confirmPassword) {
                this.showAlert('New passwords do not match', 'error');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}/user/change-password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify(passwordData)
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to change password');
                }
                
                this.showAlert('Password changed successfully', 'success');
                this.closeModal('change-password-modal');
            } catch (error) {
                this.showAlert(error.message || 'Failed to change password', 'error');
            }
        }
        
        viewActiveSessions() {
            this.showAlert('Active sessions feature coming soon', 'info');
        }
        
        viewAccountActivity() {
            this.showAlert('Account activity feature coming soon', 'info');
        }
        
        async updateNotification(type, enabled) {
            try {
                const response = await fetch(`${API_BASE_URL}/user/notifications/${type}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${AUTH_TOKEN}`
                    },
                    body: JSON.stringify({ enabled })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to update notification settings');
                }
                
                this.showAlert('Notification settings updated', 'success');
            } catch (error) {
                this.showAlert(error.message || 'Failed to update notification settings', 'error');
            }
        }
        
        logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('auth_token');
                window.location.href = 'login.html';
            }
        }
        
        closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        showAlert(message, type = 'info') {
            const alertArea = document.getElementById('alert-area');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                <span>${message}</span>
                <button style="margin-left: auto; background: none; border: none; cursor: pointer;" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            alertArea.appendChild(alert);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (alert.parentNode) {
                    alert.parentNode.removeChild(alert);
                }
            }, 5000);
        }
        
        formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }
        
        formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        formatTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins !== 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            return this.formatDate(dateString);
        }
    }
    
    // Initialize dashboard when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
        window.dashboard = new DashboardApp();
    });
</script>
</body>
</html>